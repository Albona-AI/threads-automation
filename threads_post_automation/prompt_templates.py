"""
Chat GPT APIに送信するためのプロンプトテンプレートを管理するモジュール
"""

# 投稿分析用プロンプト
ANALYSIS_PROMPT = """
あなたはSNSのThreadsを運用するマーケティングアナリストで、投稿の分析に長けています

#【今回のタスクの目的】
・スレッズでバズった「分析したい投稿」から、投稿テンプレートを作成する

#【今回のタスクの背景】
・私の会社ではThreadsでの集客に強みがあります。
・Threadsのアカウントでは一般のオーガニックユーザーに成り切って運用を行います。
・Threadsをバズらせることに関しては強みですが、タスクが属人化され社内の一部の人間にしかバズらせることができない状況です。
・バズるThreadsの投稿作成をAIに完全に任せたいという社内方針があります。
・Threadsをバズらせるには「既にバズっている投稿をテンプレート化」→「バズった要因を固定して、運用してるアカウントに合った投稿テキストに変換」のタスクが必要です。
・今回は「バズっている投稿の分析」をして、「既にバズっている投稿をテンプレート化」の準備をしたいです。

#【制約条件】
・最下部に貼り付けた【分析したい投稿】から、**下記の「分析順」**に沿って回答すること。
・様々なターゲット/ジャンルにも応用できるように、【分析したい投稿】のバズ要素を抜きだしてください
・【分析したい投稿】が複数の場合、それぞれに対して出力してください

## 【分析手順】
投稿を読み、以下のバズった投稿の分析を以下の項目で実行
1. ターゲットがスクロールを止めた理由の特定
		目的：バズる核心の抽出（フックの特定）
		・元投稿において、ターゲットが一番最初に興味を引かれたフレーズや文章を明記
		・その言葉がターゲットのどのような心理状態（共感、興味、好奇心、驚きなど）を刺激するかを一般化して説明する

2. 投稿の構成を分解する
		目的：再現性ある構造理解。元投稿を以下のように分解し、各パートの役割と心理変化を明記：
		・役割の明記：そのパーツがターゲットに与える役割やバズった理由を明確に示す
			→役割例：導入／前提の提示、共感喚起、意外性の提示、具体例提示、状況説明、問題提起、共感誘導、疑問提起、伏線（後の展開の布石）、納得・説得、まとめ・結論、感情喚起・エモーショナルな刺激、オチの提示、余韻を残すなど
		・フレーズ/表現の分析：そのパーツ内で、単語単位で分解。それぞれがターゲット/ジャンル/話の内容で変わる要素かどうか。変わる要素であれば抽象化と言語化して転用できる準備をしておく
		・ターゲットの心理変化：そのパーツがターゲットに与える心理変化を具体的に示す
			→心理変化の例：興味を持つ、驚く、期待が高まる、疑問を感じる、共感する、意外性を感じる、納得する、笑える、好感を抱く、好奇心が刺激される、自己投影する、感動するなど
　　・使われてる修辞技法と読者に与える印象：
　　　→比喩法/倒置法/体言止め/対句法/反復法/省略法/呼びかけ

3. 文体・表現技法を分析、
		目的：元投稿の文体や口調バズった要素がないか、読み手の心理変化はどのようになるのかを以下の項目ごとに分析：
		・文体（タメ口、敬語、会話調、物語調、箇条書き調など）
		・一文の長さ（短文中心か長文中心か）
		・改行頻度/テンポ感（こまめに改行・空行か、長文まとまりで改行か）
		・テンションの高さ（淡々とした冷静な語り口／感情豊かな興奮気味の語り口など）
		・読者が感じる印象・感覚（親近感／専門性／意外性／信頼感／共感性など）
					
# 【出力フォーマット】
投稿1
------------------------------------------
1. ターゲットがスクロールを止めた理由の特定
■フックとなったフレーズ
~~~

理由
・
・
・

2. 投稿の構成を分解する
構成1(冒頭のように書き換える)：~~~
役割：~~~
フレーズ/表現の分析:
〇〇〇/〇〇/〇〇〇/〇〇〇...

〇〇〇:~~
〇〇:~~
ターゲットの心理変化：~~~
使われてる修辞技法(比喩法/倒置法/体言止め/対句法/反復法/省略法/呼びかけ):
・
・

構成2(書き換える)：~~~
役割：~~~
ターゲットの心理変化：~~~
使われてる修辞技法(比喩法/倒置法/体言止め/対句法/反復法/省略法/呼びかけ):
・
・
...

3. 文体・表現技法を分析
文体
・

一文の長さ
・

改行頻度/テンポ感
・
・

テンションの高さ
・

読者が感じる印象・感覚
・
・

修辞技法
・
・

------------------------------------------

投稿2
------------------------------------------
------------------------------------------

# 【分析したい投稿】
{post_text}
"""

# テンプレート化プロンプト
TEMPLATE_PROMPT = """
あなたはSNSのThreadsをプロのセールスライターで、投稿のフォーマット化に長けています

#【今回のタスクの目的】
・スレッズでバズった「分析したい投稿」から、投稿テンプレートを作成する

#【今回のタスクの背景】
・私の会社ではThreadsでの集客に強みがあります。
・Threadsのアカウントでは一般のオーガニックユーザーに成り切って運用を行います。
・Threadsをバズらせることに関しては強みですが、タスクが属人化され社内の一部の人間にしかバズらせることができない状況です。
・バズるThreadsの投稿作成をAIに完全に任せたいという社内方針があります。
・Threadsをバズらせるには「既にバズっている投稿をテンプレート化」→「バズった要因を固定して、運用してるアカウントに合った投稿テキストに変換」のタスクが必要です。
・今回は「既にバズっている投稿をテンプレート化」して、どんなターゲットに対しても柔軟に投稿を作成できるようにしたいです。

#【制約条件】
・最下部に貼り付けた【分析したい投稿】の、バズった理由分析してもらいました。
・【分析したい投稿】が複数の場合、それぞれに対して出力してください
・今あなたが行った分析結果に基づいて、ターゲット/ジャンル/話の内容に関係ないバズ要素を構造上に固定する。この時、「参考にしたい投稿」のフレーズや文体を維持する。
・今あなたが行った分析結果に基づいて、ターゲット/ジャンル/話の内容に関係のある要素は「【穴埋め】」に置き換え、差し替え可能なように設計 
・特に、テーマや話の内容、文脈によっては変える必要のある言葉(例:時期、場所)も「【穴埋め】」に置き換えるようにしてください
・各穴埋め項目について、どのような要素や属性を入れ替えられるかガイドライン示す 
・穴埋め要素が同じでも出てくる言葉が違う、すなわち類語の方が文脈上自然である場合は、【穴埋め】の要素を変えてください
・ターゲット/ジャンル/テーマと直接関連しない「言葉」や「強調表現」を"穴埋め"項目とする必要はありません。 それが投稿の要(バズ要因)であれば、テンプレート構造として固定の形で組み込んでください。
・フォーマットの出力は投稿毎に、コピペ可能な形で行ってください

# 【出力フォーマット】
投稿1
------------------------------------------
🔻テンプレート
〇〇が〇〇〇...
...

🔻各要素の説明
①〇〇→
例(あくまで例なので出力は以下の例に引っ張られないように注意する)
・
・
②〇〇〇→
例(あくまで例なので出力は以下の例に引っ張られないように注意する)
・
・
~~
------------------------------------------

投稿2
------------------------------------------
🔻テンプレート
〇〇が〇〇〇~~~
~~~~~

🔻各要素の説明
①〇〇→
例(あくまで例なので出力は以下の例に引っ張られないように注意する)
・
・
②〇〇〇→
例(あくまで例なので出力は以下の例に引っ張られないように注意する)
・
・
~~
------------------------------------------

# 【分析したい投稿】
{post_text}

# 【投稿分析結果】
{analysis_result}
"""

# 最終投稿生成プロンプト
FINAL_POST_PROMPT = """
あなたはSNSのThreadsプロのコンテンツライターです。

#【タスク】
以下の投稿テンプレートを使って、指定された特定ターゲット向けに、【穴埋め】部分を埋めて完成した投稿文を作成してください。

#【制約条件】
・投稿テンプレートの「テンプレート」部分を、ターゲットに適した具体的な単語/フレーズに置き換える
・穴埋めする際に「🔻各要素の説明」に書いてある要素を必ずいれること
・テンプレートの基本構造・文体・トーンは維持すること
・ターゲットの特性を考慮し、自然で共感を呼ぶ内容にすること
・出力の際に生成した投稿以外のものを付けないでください。そのままコピペして投稿します。

#【ターゲット】
{target}

#【投稿テンプレート】
{template}

#【出力形式】
完成した投稿のテキストのみを出力してください。

#【出力例】
私の職場にめっちゃ学歴高いけど
ミスを連発、報連相もしない、タスク漏れで手に負えない
みたいなADHDの権化みたいな同僚がいて
「ああ学歴って仕事に関係ないんだな」
と思ってたけど、ある日そいつが別部署に異動で

即レス、タスク管理、根回しやりまくって
爆速でプロジェクト進めてなにかと思ったら
そいつの趣味が専門の仕事だった。
後々聞いたら
仕事ができなかったのはADHDじゃなくて
ただ好きになれるかどうかだったという話...
""" 